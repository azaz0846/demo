<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="user-scalable=0"><br></br>
    <meta name="viewport" content="user-scalable=no">
    <meta http-equiv="Page-Enter" content="revealTrans(Duration=1.0,Transition=23)">
    <title>Gamedev Canvas Workshop</title>
    <!--<link rel="stylesheet" href="hair-light.css">-->
    <style>
        body {
            width: 100%;
            height: auto;
            padding: 0;
            margin: 0;
            font-family: monospace;      background-image: url("1.jfif");
            background-attachment: fixed;
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
        }

        #player {
            position: absolute;
            border-width: 5px;
            border-style: dotted solid;
            border-color: violet;
            border-radius: 40%;
            width: 100px;
            height: 100px;
            left: 55px;
            bottom: 20px;
        }

        #player:hover {
            transform: scale(1.2);
        }

        #enemy {
            position: absolute;
            border-width: 5px;
            border-style: dotted solid;
            border-color: olivedrab;
            border-radius: 40%;
            width: 100px;
            height: 100px;
            right: 55px;
            top: 20px;
        }

        #enemy:hover {
            transform: scale(1.2);

        }

        .table {
            border-top: none;
            /*width: 1100px;
            height: 210px;*/
            position: absolute;
            text-align: center;
            margin-left: auto;
            margin-right: auto;

        }

        .ctable {
            border-top: none;
            /*width: 1100px;
            height: 210px;*/
            position: absolute;
            text-align: center;
            margin-left: auto;
            margin-right: auto;


        }

        .mcard {
            display: inline-block;
            width: 150px;
            height: 150px;
            border: 1px solid olive;
            margin: 5px;

        }

        .ucard,
        .dcard {
            display: inline-block;
            width: 125px;
            height: 150px;
            border: 1px solid olive;
            margin: 5px;

        }

        #edist {
            position: absolute;
            width: 150px;
            height: 150px;
            border: 1px solid burlywood;
            top: 15px;
            left: 15px;
            text-align: center;
        }

        #pdist {
            position: absolute;
            width: 150px;
            height: 150px;
            border: 1px solid burlywood;
            bottom: 15px;
            right: 15px;
            text-align: center;
        }


        .mcard img,
        .dcard img,
        .ucard img {
            transition: all 0.2s ease-out;
            position: relative;
            z-index: 2;
        }

        .dcard img:hover {
            transform: translateY(-120px) scale(2.5);
            position: relative;
            z-index: 3;
        }


        .mcard img:hover {
            transform: scale(2.5);
            position: relative;
            z-index: 3;

        }

        #game {
            position: absolute;
            bottom: 175px;
            left: 20px;
            border: 1px solid white;
            height: 200px;
            width: 200px;
            text-align: center;
            color: coral;

        }

        .gameword {
            position: relative;
            font-size: larger;
            font-family: "微軟正黑體";
        }

        .titleword {
            position: relative;

            font-size: 35px;
            font-family: "微軟正黑體";
        }

        #title {
            position: absolute;
            bottom: 375px;
            left: 20px;
            border: 1px solid white;
            height: 50px;
            width: 200px;
            text-align: center;
            color: coral;
        }
   
        
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        var per, ener, Value, flag = 0, flag1 = 0, f = 0, guan = [0, 0, 0, 0, 0];
        var pdata = ["1.jpeg", "2.jpeg", "3.jpeg", "4.jpeg", "5.jpeg", "6.jpeg", "7.jpeg"], pcheck = [0, 0, 0, 0, 0, 0, 0], play = [0, 0, 0, 0, 0, 0], play2 = [0, 0, 0, 0, 0];
        var edata = ["01.jpeg", "02.jpeg", "03.jpeg", "04.jpeg", "05.jpeg", "06.jpeg", "07.jpeg"], enem = [0, 0, 0, 0, 0, 0], enem2 = [0, 0, 0, 0, 0, 0], echeck = [0, 0, 0, 0, 0, 0, 0];
        var pob = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2]; //敵人抽卡機率調整
        $(document).ready(function () {
            $("#game").html("<span class='gameword'>我是訊息版<br>Game Start!</span>");
            $("#button").click(function () {
                flag1++;
                if (flag1 == 1) enemyturn();
            });

        });

        function dist() {
            for (let i = 1; i <= 5; i++) {                          //player 發牌
                Value = Math.floor(Math.random() * 7);
                while (pcheck[Value] > 0) {
                    Value = Math.floor(Math.random() * 7);
                    let c = 0;
                    for (let j = 0; j < 7; j++) {
                        if (pcheck[j] == 1) c++;
                    }
                    if (c == 7) {
                        for (let j = 0; j < 7; j++) {
                            pcheck[j] = 0;
                        }
                        c = 0;
                    }
                }
                pcheck[Value]++;
                document.getElementById("p" + i).src = pdata[Value];
                document.getElementById("p" + i).alt = pdata[Value];
                play[i - 1] = pdata[Value];
                //console.log(play[i - 1]);
            }
            document.getElementById("p6").src = "null.png";
            document.getElementById("p6").alt = "null.png";
            play[5] = "null.png";

            for (let i = 1; i <= 5; i++) {                          //enemy 發牌
                Value = Math.floor(Math.random() * 7);
                while (echeck[Value] > 0) {
                    Value = Math.floor(Math.random() * 7);
                    let c = 0;
                    for (let j = 0; j < 7; j++) {
                        if (echeck[j] == 1) c++;
                    }
                    if (c == 7) {
                        for (let j = 0; j < 7; j++) {
                            echeck[j] = 0;
                        }
                        c = 0;
                    }
                }
                echeck[Value]++;
                document.getElementById("e" + i).src = "hard.jpg";   //敵人卡背
                document.getElementById("e" + i).alt = "hard.jpg";
                enem[i - 1] = edata[Value];
                //console.log(enem[i - 1]);

            }
            document.getElementById("e6").src = "null.png";
            document.getElementById("e6").alt = "null.png";
            enem[5] = "null.png";
            f = 0;
            $("#game").html("<span class='gameword'>請稍等<br>當鼠鏢移到卡上<br>放大後 方可點擊</span>");
            setTimeout(draw, 1000);
        }
        function start() {
            //document.getElementById("game").innerHTML = '<div id="screen"><p class="word">詳細卡片資訊顯示在此處</p></div><div class="table" style="position:absolute;top:0px; left:0; right:0;" ><div class="card">c</div><div class="card">c</div><div class="card">c</div><div class="card">c</div><div class="card">c</div></div><div id="enemy"><img src="78040969_p0.jpg" width="100px" height="100px" style="border-radius:40%;" /></div><div class="table" style="position:absolute;top:230px; left:0; right:0;"><div class="card">c</div><div class="card">c</div><div class="card">c</div><div class="card">c</div><div class="card">c</div></div><div class="table" style="position:absolute;bottom:230px; left:0; right:0;"><div class="card">c</div><div class="card">c</div><div class="card">c</div><div class="card">c</div><div class="card">c</div></div><div id="player"><img src="73982425_p0.jpg" width="100px" height="100px" style="border-radius:40%;" /></div><div class="table"style="position:absolute;bottom:0px; left:0; right:0;"><div class="card">c</div><div class="card">c</div><div class="card">c</div><div class="card">c</div><div class="card">c</div></div>';
            setTimeout(dist, 1000);
        } // end function start

        function doClick(id) {
            flag++;
            if (flag <= 2) {  //一場點一or二次
                $("#game").html("<span class='gameword'>請稍等<br>當鼠鏢移到卡上<br>放大後 方可點擊</span>");

                if (id <= 6) {
                    if ($("#p" + id).attr("src") == "null.png") {
                        flag--;
                        $("#game").html("<span class='gameword'>無效卡牌</span>");
                        setTimeout(function () {
                            if (flag == 0) $("#game").html("<span class='gameword'>請選擇<ul><li>出牌</li><li>攻擊</li><li>結束回合</li></ul>你有兩步可以走</span>");
                            else if (flag == 1) $("#game").html("<span class='gameword'>請選擇<ul><li>出牌</li><li>攻擊</li><li>結束回合</li></ul>剩餘一步可以走</span>");
                        }, 1000);
                    }
                    else if ($("#p" + id).attr("src") == pdata[1]) {
                        let e6 = 0;
                        for (let j = 1; j < 6; j++) {
                            if ($("#et" + j).attr("src") == "null.png") e6++;

                        }
                        console.log("e6:" + e6);
                        if (e6 == 5) {
                            console.log("敵方場上無卡牌");
                            flag--;
                            var fl3 = 0;   //下面flag==1會和最底下衝突
                            if (flag == 1) fl3 = 1;
                            $("#game").html("<span class='gameword'>敵方場上無卡牌</span>");
                            setTimeout(function () {
                                console.log("flag:" + flag);

                                if (flag == 0) $("#game").html("<span class='gameword'>請選擇<ul><li>出牌</li><li>攻擊</li><li>結束回合</li></ul>你有兩步可以走</span>");
                                else if (flag == 1) $("#game").html("<span class='gameword'>請選擇<ul><li>出牌</li><li>攻擊</li><li>結束回合</li></ul>剩餘一步可以走</span>");
                                fl3 = 0;
                            }, 1000);
                        }
                        else {
                            let y = 0;
                            for (var i = 1; i <= 5; i++) {
                                if ($("#pt" + i).attr("src") == "null.png") {
                                    $("#pt" + i).attr("src", play[id - 1]);
                                    play2[i - 1] = play[id - 1];
                                    $("#pt" + i).attr("alt", play[id - 1]);
                                    $("#p" + id).attr("src", "null.png");
                                    $("#p" + id).attr("alt", "null.png");
                                    play[id - 1] = "null.png";
                                    break;
                                }
                                else {
                                    y++;

                                }

                            }
                            if (y == 5) {
                                $("#game").html("<span class='gameword'>場上已滿<br>請進行攻擊或結束回合</span>");
                                flag--;
                                //setTimeout(function(){$("#game").html("<span class='gameword'>可選2牌或抽牌或結束回合</span>");},1000);
                            }
                            else {
                                $("#game").html("<span class='gameword'>使用魔法卡 <span style='font-weight:bold;'>泣電視台</span><br>效果：吃掉敵方一名戰士並消失</span>");
                                setTimeout(function () {

                                    for (let j = 1; j < 6; j++) {
                                        if ($("#et" + j).attr("src") != "null.png") {
                                            $("#et" + j).attr("src", $("#pt" + i).attr("src"));

                                            $("#pt" + i).attr("src", "null.png");
                                            enem2[i - 1] = "null.png";
                                            setTimeout(function () {
                                                $("#pt" + i).attr("src", play2[i - 1]);
                                                $("#et" + j).attr("src", "null.png");
                                                setTimeout(function () {
                                                    $("#pt" + i).attr("src", "null.png");
                                                    play2[i - 1] = "null.png";
                                                }, 500);
                                            }, 500);
                                            break;
                                        }
                                    }
                                    for (let i = 1; i <= 6; i++) {
                                        if ($("#p" + i).attr("src") == "null.png") {
                                            let j = i;
                                            var In = setInterval(function () {
                                                if (j == 6) {

                                                    play[j - 1] = "null.png";
                                                    for (let k = 0; k < 6; k++) {
                                                        //console.log("*" + play[k]);
                                                    }
                                                    //$("#ptake").html("<button style='position:relative;top:10px;'>請抽卡</button>");

                                                    clearInterval(In);
                                                }
                                                $("#p" + j).attr("src", play[j]);
                                                play[j - 1] = play[j];
                                                //console.log("*" + play[j]);
                                                $("#p" + (j + 1)).attr("src", "null.png");

                                                j++;

                                            }, 500);
                                            break;
                                        }
                                    }

                                }, 500);
                            }
                        }
                    }
                    else {
                        let y = 0;
                        for (var i = 1; i <= 5; i++) {
                            if ($("#pt" + i).attr("src") == "null.png") {
                                $("#pt" + i).attr("src", play[id - 1]);
                                play2[i - 1] = play[id - 1];
                                $("#pt" + i).attr("alt", play[id - 1]);
                                $("#p" + id).attr("src", "null.png");
                                $("#p" + id).attr("alt", "null.png");
                                play[id - 1] = "null.png";

                                break;
                            }
                            else {
                                y++;

                            }

                        }

                        if (y == 5) {
                            $("#game").html("<span class='gameword'>場上已滿<br>請進行攻擊或結束回合</span>");
                            flag--;
                            //setTimeout(function(){$("#game").html("<span class='gameword'>可選2牌或抽牌或結束回合</span>");},1000);
                        }
                        //****************************************************

                        else {

                            setTimeout(function () {

                                console.log("play2[i - 1]:" + play2[i - 1]);
                                switch (play2[i - 1]) {
                                    case pdata[4]:
                                        console.log("召喚反韓粉");
                                        $("#game").html("<span class='gameword'>使用魔法卡 <span style='font-weight:bold;'>反紅媒遊行</span><br>效果：召喚反韓粉</span>");
                                        $("#pt" + i).attr("src", pdata[6]);
                                        play2[i - 1] = pdata[6];
                                        break;

                                }
                            }, 500);
                            for (let i = 1; i <= 6; i++) {
                                if ($("#p" + i).attr("src") == "null.png") {
                                    let j = i;
                                    var In = setInterval(function () {
                                        if (j == 6) {

                                            play[j - 1] = "null.png";
                                            for (let k = 0; k < 6; k++) {
                                                console.log("finplay[" + k + "]:" + play[k]);
                                            }
                                            //$("#ptake").html("<button style='position:relative;top:10px;'>請抽卡</button>");

                                            clearInterval(In);
                                        } else {

                                            $("#p" + j).attr("src", play[j]);

                                            play[j - 1] = play[j];

                                            //console.log("*" + play[j]);
                                            $("#p" + (j + 1)).attr("src", "null.png");
                                        }
                                        j++;

                                    }, 500);
                                    break;
                                }
                            }
                        }
                    }
                }
                else {  //player attack
                    if ($("#pt" + (id - 6)).attr("src") == "null.png") {
                        flag--;
                        $("#game").html("<span class='gameword'>無效卡牌</span>");
                        setTimeout(function () {
                            if (flag == 0) $("#game").html("<span class='gameword'>請選擇<ul><li>出牌</li><li>攻擊</li><li>結束回合</li></ul>你有兩步可以走</span>");
                            else if (flag == 1) $("#game").html("<span class='gameword'>請選擇<ul><li>出牌</li><li>攻擊</li><li>結束回合</li></ul>剩餘一步可以走</span>");
                        }, 1000);
                    }
                    else {
                        let e1 = 0;
                        for (let i = 1; i < 6; i++) {
                            if ($("#et" + i).attr("src") == "null.png") e1++;
                        }
                        if (e1 == 5) {

                            let eval = parseInt($("#eblood").text());
                            $("#eblood").text(eval - 500);
                            if ((eval - 500) == 0) {
                                $("#game").html("<span class='gameword'>你贏了</span>");
                                setTimeout(function () {

                                    window.open("greensideandwin.html", "_parent");

                                }, 500);
                            }

                        }
                        else {
                            let a = Math.floor(Math.random() * 5 + 1);
                            while ($("#et" + a).attr("src") == "null.png") {
                                a = Math.floor(Math.random() * 5 + 1);
                            }


                            $("#et" + a).attr("src", $("#pt" + (id - 6)).attr("src"));
                            $("#pt" + (id - 6)).attr("src", "null.png");

                            setTimeout(function () {
                                $("#pt" + (id - 6)).attr("src", play2[(id - 6) - 1]);
                                $("#et" + a).attr("src", "null.png");
                                if (enem2[a - 1] == edata[2]) {
                                    $("#game").html("<span class='gameword'>打死<span style='font-weight:bold;'>馬皇</span><br>接觸了死亡之握<br>受到影響 戰士死亡</span>");
                                    console.log("enem2[a - 1] == edata[2]");
                                    setTimeout(function () {
                                        $("#pt" + (id - 6)).attr("src", "null.png");
                                        play2[(id - 6) - 1] = "null.png";
                                        for (let o = 1; o < 6; o++) {
                                            console.log("play2:" + play2[o - 1]);
                                        }
                                        setTimeout(function () {
                                            if (flag == 1) {

                                                $("#game").html("<span class='gameword'>請選擇<ul><li>出牌</li><li>攻擊</li><li>結束回合</li></ul>剩餘一步可以走</span>");
                                            }
                                            else if (flag == 2) {
                                                $("#game").html("<span class='gameword'>請等待</span>");
                                            }
                                        }, 3000);
                                    }, 500);
                                }
                                enem2[a - 1] = "null.png";
                            }, 500);

                        }
                    }
                }

                if (flag == 1 && fl3 == 0) {

                    $("#game").html("<span class='gameword'>請選擇<ul><li>出牌</li><li>攻擊</li><li>結束回合</li></ul>剩餘一步可以走</span>");
                }
                if (flag == 2) {
                    f = 1;

                    enemyturn();

                }

            }
        }
        function draw() {
            //console.log(1);
            if (f == 0) {          //player
                Value = Math.floor(Math.random() * 7);
                while (pcheck[Value] > 0) {
                    Value = Math.floor(Math.random() * 7);
                    let c = 0;
                    for (let j = 0; j < 7; j++) {
                        if (pcheck[j] == 1) c++;
                    }
                    if (c == 7) {
                        for (let j = 0; j < 7; j++) {
                            pcheck[j] = 0;
                        }
                        c = 0;
                    }
                }
                pcheck[Value]++;
                for (let i = 1; i <= 6; i++) {
                    if ($("#p" + i).attr("src") == "null.png") {
                        $("#p" + i).attr("src", pdata[Value]);
                        play[i - 1] = pdata[Value];
                        $("#p" + i).attr("alt", pdata[Value]);
                        break;
                    }
                }
                for (let i = 1; i <= 6; i++) {

                    console.log("play[" + (i - 1) + "]:" + play[i - 1]);
                }
                $("#title").html("<span class='titleword'>你的回合</span>");
                if (flag == 0) $("#game").html("<span class='gameword'>請選擇<ul><li>出牌</li><li>攻擊</li><li>結束回合</li></ul>你有兩步可以走</span>");
                else if (flag == 1) $("#game").html("<span class='gameword'>請選擇<ul><li>出牌</li><li>攻擊</li><li>結束回合</li></ul>剩餘一步可以走</span>");
            } else if (f == 1) {       //enemy
                Value = Math.floor(Math.random() * 7);
                while (echeck[Value] > 0) {
                    Value = Math.floor(Math.random() * 7);
                    let c = 0;
                    for (let j = 0; j < 7; j++) {
                        if (echeck[j] == 1) c++;
                    }
                    if (c == 7) {
                        for (let j = 0; j < 7; j++) {
                            echeck[j] = 0;
                        }
                        c = 0;
                    }
                }
                echeck[Value]++;
                for (let i = 1; i <= 6; i++) {
                    if ($("#e" + i).attr("src") == "null.png") {
                        $("#e" + i).attr("src", "hard.jpg");  //敵人卡背
                        enem[i - 1] = edata[Value];
                        $("#e" + i).attr("alt", "hard.jpg");
                        break;
                    }
                }
                for (let i = 1; i <= 6; i++) {

                    console.log("enem[" + (i - 1) + "]:" + enem[i - 1]);
                }
            }

        }
        function enemyturn() {
            $("#title").html("<span class='titleword'>敵人的回合</span>");
            $("#game").html("<span class='gameword'>請等待</span>");

            if ($("#e6").attr("src") == "null.png") setTimeout(function () { console.log("*************"); f = 1; draw(); }, 1000);

            setTimeout(function () {
                $("#game").html("<span class='gameword'>請等待</span>");
                let w = 0;
                let q = setInterval(function () {
                    var pop = Math.floor(Math.random() * 21);
                    var Ran = pob[pop]; //choose 1 | attack | return round
                    console.log("Ran:" + Ran + " Pob:" + pop);

                    let e1 = 0;
                    for (let i = 1; i <= 6; i++) {
                        if ($("#e" + i).attr("src") == "null.png") e1++;
                    }
                    let e2 = 0;
                    for (let i = 1; i < 6; i++) {
                        if ($("#et" + i).attr("src") == "null.png") e2++;
                    }
                    if (e1 == 6 || e2 == 0) {
                        while (Ran == 0) {
                            //Ran = Math.floor(Math.random() * 3);
                            pop = Math.floor(Math.random() * 21);
                            Ran = pob[pop]; //choose 1 | attack | return round
                        }
                    }

                    if (e2 == 5) {
                        while (Ran == 1) {
                            //Ran = Math.floor(Math.random() * 3);
                            pop = Math.floor(Math.random() * 21);
                            Ran = pob[pop]; //choose 1 | attack | return round
                        }
                    }
                    if (e1 == 6 && e2 == 5) Ran = 2;
                    //var Ran = 1;
                    console.log("finalRan:" + Ran + " Pob:" + pop);
                    if (Ran == 0) {
                        console.log(0);
                        $("#game").html("<span class='gameword'>敵人放牌</span>");

                        let cc = Math.floor(Math.random() * 5 + 1);
                        console.log(enem[cc - 1] + " id:e" + cc);
                        var fl = 0, fl2 = 0;
                        if (enem[cc - 1] == edata[1]) {  //紅天 敵場上無人時禁止打玩家

                            let e5 = 0;
                            for (let u = 1; u < 6; u++) {
                                if ($("#pt" + u).attr("src") == "null.png") e5++;
                            }
                            if (e5 == 5) {
                                console.log("抽紅天無牌");
                                fl = 1;
                                let e6 = 0;
                                for (let p = 1; p <= 6; p++) {
                                    if (enem[p - 1] == "null.png" && enem[p - 1] == edata[1]) e6++;
                                }
                                if (e6 == 6) {//都紅天&空白 結束回合
                                    Ran = 2;
                                    fl2 = 1;
                                    $("#game").html("<span class='gameword'>敵人選擇結束回合</span>");
                                    console.log("都紅天&空白 結束回合");
                                    setTimeout(function () {
                                        flag = 0;
                                        flag1 = 0;
                                        $("#title").html("<span class='titleword'>你的回合</span>");
                                        $("#game").html("<span class='gameword'>請等待</span>");
                                        if ($("#p6").attr("src") == "null.png") setTimeout(function () { f = 0; draw(); }, 1000);

                                        $("#game").html("<span class='gameword'>請選擇<ul><li>出牌</li><li>攻擊</li><li>結束回合</li></ul>你有兩步可以走</span>");
                                        clearInterval(q);
                                    }, 2000);
                                }
                                while (enem[cc - 1] == edata[1] && fl2 == 0) {
                                    cc = Math.floor(Math.random() * 6 + 1);

                                }
                            }
                        }
                        if (enem[cc - 1] == "null.png") {
                            if (fl == 0) {
                                while (enem[cc - 1] == "null.png") {
                                    cc = Math.floor(Math.random() * 6 + 1);
                                }
                            }
                            else if (fl == 1) {
                                while (enem[cc - 1] == "null.png" && enem[cc - 1] == edata[1]) {
                                    cc = Math.floor(Math.random() * 6 + 1);
                                }
                            }

                        }

                        for (var i = 1; i <= 5; i++) {
                            if ($("#et" + i).attr("src") == "null.png") {
                                $("#et" + i).attr("src", enem[cc - 1]);
                                enem2[i - 1] = enem[cc - 1];
                                $("#et" + i).attr("alt", enem[cc - 1]);
                                break;
                            }
                        }
                        $("#e" + cc).attr("src", "null.png");
                        $("#e" + cc).attr("alt", "null.png");
                        enem[cc - 1] = "null.png";
                        setTimeout(function () {

                            //console.log(enem2[i - 1]);
                            // console.log(edata[5]);
                            switch (enem2[i - 1]) {
                                case edata[4]:
                                    console.log("召喚韓粉");
                                    $("#game").html("<span class='gameword'>使用魔法卡 <span style='font-weight:bold;'>請副局長回答</span><br>效果：召喚鋼鐵韓粉</span>");
                                    $("#et" + i).attr("src", edata[6]);
                                    enem2[i - 1] = edata[6];
                                    break;

                            }

                        }, 1000);
                        if (enem2[i - 1] == edata[1]) {
                            $("#game").html("<span class='gameword'>抽到魔法卡 <span style='font-weight:bold;'>紅天電視台</span><br>效果：吃掉我方一名戰士並消失</span>");
                            setTimeout(function () {

                                for (let j = 1; j < 6; j++) {
                                    if ($("#pt" + j).attr("src") != "null.png") {
                                        $("#pt" + j).attr("src", $("#et" + i).attr("src"));

                                        $("#et" + i).attr("src", "null.png");
                                        play2[i - 1] = "null.png";
                                        setTimeout(function () {
                                            $("#et" + i).attr("src", enem2[i - 1]);
                                            $("#pt" + j).attr("src", "null.png");
                                            setTimeout(function () {
                                                $("#et" + i).attr("src", "null.png");
                                                enem2[i - 1] = "null.png";
                                            }, 500);
                                        }, 500);
                                        break;
                                    }
                                }
                                for (let i = 1; i <= 6; i++) {
                                    if ($("#e" + i).attr("src") == "null.png") {
                                        let j = i;
                                        var In = setInterval(function () {
                                            if (j == 6) {

                                                enem[j - 1] = "null.png";
                                                $("#e6").attr("src", "null.png");
                                                for (let k = 0; k < 6; k++) {
                                                    console.log("*" + enem[k]);
                                                }
                                                //$("#ptake").html("<button style='position:relative;top:10px;'>請抽卡</button>");

                                                clearInterval(In);
                                            }
                                            else {
                                                if (enem[j] == "null.png") $("#e" + j).attr("src", "null.png");           //敵人卡背
                                                else $("#e" + j).attr("src", "hard.jpg");
                                                enem[j - 1] = enem[j];
                                                //console.log("*" + play[j]);
                                                $("#e" + (j + 1)).attr("src", "null.png");
                                            }
                                            j++

                                        }, 500);
                                        break;
                                    }
                                }


                            }, 500);

                        }
                        else if (enem2[i - 1] == edata[0]) {
                            $("#game").html("<span class='gameword'>抽到魔法卡 <span style='font-weight:bold;'>私菸案</span><br>效果：直接攻擊玩家並消失</span>");
                            setTimeout(function () {

                                let pval = parseInt($("#pblood").text());
                                $("#pblood").text(pval - 500);
                                if ((pval - 500) == 0) {
                                    setTimeout(function () {
                                        $("#game").html("<span class='gameword'>你輸了</span>");
  
                                        window.open("greenlose.html", "_parent");
                                    }, 500);
                                }


                                //else (pval - 500) != 0
                                setTimeout(function () {
                                    $("#et" + i).attr("src", "null.png");
                                    enem2[i - 1] = "null.png";
                                }, 500);

                                for (let i = 1; i <= 6; i++) {
                                    if ($("#e" + i).attr("src") == "null.png") {
                                        let j = i;
                                        var In = setInterval(function () {
                                            if (j == 6) {

                                                enem[j - 1] = "null.png";
                                                $("#e6").attr("src", "null.png");
                                                for (let k = 0; k < 6; k++) {
                                                    console.log("finenem[" + k + "]:" + enem[k]);
                                                }
                                                //$("#ptake").html("<button style='position:relative;top:10px;'>請抽卡</button>");

                                                clearInterval(In);
                                            }
                                            else {
                                                if (enem[j] == "null.png") $("#e" + j).attr("src", "null.png");           //敵人卡背
                                                else $("#e" + j).attr("src", "hard.jpg");
                                                enem[j - 1] = enem[j];
                                                //console.log("*" + play[j]);
                                                $("#e" + (j + 1)).attr("src", "null.png");
                                            }
                                            j++

                                        }, 500);
                                        break;
                                    }
                                }


                            }, 500);

                        }
                        else {
                            for (let k = 0; k < 6; k++) {
                                //console.log("&" + enem[k]);
                            }
                            //setTimeout(function () {
                            for (let i = 1; i <= 6; i++) {
                                if ($("#e" + i).attr("src") == "null.png") {
                                    let j = i;
                                    var In = setInterval(function () {
                                        if (j == 6) {

                                            enem[j - 1] = "null.png";
                                            $("#e6").attr("src", "null.png");
                                            for (let k = 0; k < 6; k++) {
                                                console.log("finenem[" + k + "]:" + enem[k]);
                                            }
                                            //$("#ptake").html("<button style='position:relative;top:10px;'>請抽卡</button>");

                                            clearInterval(In);
                                        }
                                        else {
                                            if (enem[j] == "null.png") $("#e" + j).attr("src", "null.png");           //敵人卡背
                                            else $("#e" + j).attr("src", "hard.jpg");
                                            enem[j - 1] = enem[j];
                                            //console.log("*" + play[j]);
                                            $("#e" + (j + 1)).attr("src", "null.png");
                                        }
                                        j++

                                    }, 500);
                                    break;
                                }
                            }

                        }

                    }
                    else if (Ran == 1) {
                        console.log(1);
                        $("#game").html("<span class='gameword'>敵人進攻</span>");

                        let e3 = 0;
                        for (let i = 1; i < 6; i++) {
                            if ($("#pt" + i).attr("src") == "null.png") e3++;
                        }
                        if (e3 == 5) {
                            let pval = parseInt($("#pblood").text());
                            $("#pblood").text(pval - 500);
                            if ((pval - 500) == 0) {
                                setTimeout(function () {
                  
                                    window.open("greenlose.html", "_parent");
                                }, 500);
                            }
                        }
                        else {
                            let a = Math.floor(Math.random() * 5 + 1);
                            while (($("#et" + a).attr("src") == "null.png")) {
                                a = Math.floor(Math.random() * 5 + 1);
                            }
                            let o = 0;
                            for (let i = 1; i < 6; i++) {
                                if ($("#pt" + i).attr("src") != "null.png") {
                                    if ($("#pt" + i).attr("src") == pdata[2]) o = 1;
                                    else if ($("#pt" + i).attr("src") == pdata[5]) guan[i - 1]++;
                                    $("#pt" + i).attr("src", $("#et" + a).attr("src"));
                                    $("#et" + a).attr("src", "null.png");

                                    setTimeout(function () {
                                        if (o) {
                                            console.log("打死蘇貞昌");
                                            $("#game").html("<span class='gameword'>打死<span style='font-weight:bold;'>蘇貞昌</span><br>發動<span style='font-weight:bold;'>電火球</span><br>受到影響 戰士死亡</span>");
                                            setTimeout(function () {
                                                $("#et" + a).attr("src", "null.png");
                                                enem2[a - 1] = "null.png";
                                            }, 500);
                                        }
                                        console.log("guan[" + (i - 1) + "]:" + guan[i - 1]);
                                        if (play2[i - 1] == pdata[5] && guan[i - 1] == 1) {
                                            if (enem2[a - 1] == edata[2]) {
                                                $("#et" + a).attr("src", enem2[a - 1]);
                                                $("#pt" + i).attr("src", "null.png");
                                                play2[i - 1] = "null.png";
                                                guan[i - 1] = 0;
                                            } else {
                                                console.log("免疫館長");
                                                $("#game").html("<span class='gameword'>普通韓粉需要攻擊兩次才可擊敗館長</span>");
                                                $("#pt" + i).attr("src", pdata[5]);
                                                $("#et" + a).attr("src", enem2[a - 1]);
                                            }

                                        }
                                        else {
                                            $("#et" + a).attr("src", enem2[a - 1]);
                                            $("#pt" + i).attr("src", "null.png");
                                            play2[i - 1] = "null.png";
                                            if (guan[i - 1] == 2) guan[i - 1] = 0;
                                        }
                                        console.log("finguan[" + (i - 1) + "]:" + guan[i - 1]);
                                    }, 500);
                                    break;
                                }
                            }
                        }

                    }
                    else if (Ran == 2) {
                        $("#game").html("<span class='gameword'>敵人選擇結束回合</span>");
                        console.log(2);
                        setTimeout(function () {
                            flag = 0;
                            flag1 = 0;
                            $("#title").html("<span class='titleword'>你的回合</span>");
                            $("#game").html("<span class='gameword'>請等待</span>");
                            if ($("#p6").attr("src") == "null.png") setTimeout(function () { f = 0; draw(); }, 1000);

                            $("#game").html("<span class='gameword'>請選擇<ul><li>出牌</li><li>攻擊</li><li>結束回合</li></ul>你有兩步可以走</span>");
                            clearInterval(q);
                        }, 2000);

                    }

                    w++;
                    if (w == 2 && Ran != 2) {
                        setTimeout(function () {
                            flag = 0;
                            flag1 = 0;
                            clearInterval(q);
                            if ($("#p6").attr("src") == "null.png") setTimeout(function () { f = 0; draw(); }, 1000);
                            $("#title").html("<span class='titleword'>你的回合</span>");
                            $("#game").html("<span class='gameword'>請選擇<ul><li>出牌</li><li>攻擊</li><li>結束回合</li></ul>你有兩步可以走</span>");
                        }, 2000);
                    }

                }, 4000);


            }, 200);



        }
        window.addEventListener("load", start, false);
    </script>
</head>

<body>
    <div id="body">


        <div id="title"></div>
        <div id="game"></div>
        <input type="button" id="button" style="position:absolute;right:50px;bottom:180px;" value="結束回合"></input>
        <div id="eblood" style="position:absolute;top:150px;right:95px;color:blanchedalmond;font-size: larger;">2500
        </div>
        <div id="pblood" style="position:absolute;bottom:150px;left:95px;color:blanchedalmond;font-size: larger;">2500
        </div>
        <div id="pdist">
            <img id="pl" src="hard.jpg" height="150px">

        </div>
        <div id="edist">
            <img id="en" src="hard.jpg" height="150px">
        </div>
        <div class="table" style="position:absolute;top:0px; left:0; right:0;width: 900px;height: 160px;">
            <div class="ucard">
                <img id="e1" src="null.png" height="150px" alt="">
            </div>
            <div class="ucard">
                <img id="e2" src="null.png" height="150px" alt="">
            </div>
            <div class="ucard">
                <img id="e3" src="null.png" height="150px" alt="">
            </div>
            <div class="ucard">
                <img id="e4" src="null.png" height="150px" alt="">
            </div>
            <div class="ucard">
                <img id="e5" src="null.png" height="150px" alt="">
            </div>
            <div class="ucard">
                <img id="e6" src="null.png" height="150px" alt="">
            </div>
        </div>
        <div id="enemy">
            <img src="3.jpg" width="100%" height="100%" style="border-radius:40%;" />
        </div>
        <div class="ctable"
            style="position:absolute;top:160px; left:0; right:0;width: 1000px;height: 160px;border-radius: 20px;">
            <div class="mcard">
                <img id="et1" src="null.png" height="150px">
            </div>
            <div class="mcard">
                <img id="et2" src="null.png" height="150px">
            </div>
            <div class="mcard">
                <img id="et3" src="null.png" height="150px">
            </div>
            <div class="mcard">
                <img id="et4" src="null.png" height="150px">
            </div>
            <div class="mcard">
                <img id="et5" src="null.png" height="150px">
            </div>

        </div>
        <div class="ctable"
            style="position:absolute;bottom:160px; left:0; right:0;width: 1000px;height: 160px;border-radius: 20px;">
            <div class="mcard">
                <img id="pt1" onclick="doClick(7)" src="null.png" height="150px">
            </div>
            <div class="mcard">
                <img id="pt2" onclick="doClick(8)" src="null.png" height="150px">
            </div>
            <div class="mcard">
                <img id="pt3" onclick="doClick(9)" src="null.png" height="150px">
            </div>
            <div class="mcard">
                <img id="pt4" onclick="doClick(10)" src="null.png" height="150px">
            </div>
            <div class="mcard">
                <img id="pt5" onclick="doClick(11)" src="null.png" height="150px">
            </div>

        </div>
        <div id="player">
            <img src="2.jpg" width="100%" height="100%" style="border-radius:40%;" />
        </div>
        <div class="table" style="position:absolute;bottom:0px; left:0; right:0;width: 900px;height: 160px;">
            <div class="dcard">
                <img id="p1" onclick="doClick(1)" src="null.png" height="150px" alt="">
            </div>
            <div class="dcard">
                <img id="p2" onclick="doClick(2)" src="null.png" height="150px" alt="">
            </div>
            <div class="dcard">
                <img id="p3" onclick="doClick(3)" src="null.png" height="150px" alt="">
            </div>
            <div class="dcard">
                <img id="p4" onclick="doClick(4)" src="null.png" height="150px" alt="">
            </div>
            <div class="dcard">
                <img id="p5" onclick="doClick(5)" src="null.png" height="150px" alt="">
            </div>
            <div class="dcard" id="ptake">
                <img id="p6" onclick="doClick(6)" src="null.png" height="150px" alt="">
            </div>
        </div>

    </div>
</body>

</html>